<Page x:Class="kanzeed.Pages.TablesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Таблицы БД"
      Background="#F8F9FA">

    <Page.Resources>
        <Style x:Key="PrimaryButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="#4361EE"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="34"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="Margin" Value="4,0,4,0"/>
        </Style>
        <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#4361EE"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#4361EE"/>
            <Setter Property="Height" Value="34"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="Margin" Value="4,0,4,0"/>
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="230"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Margin="0,0,12,0">
            <TextBlock Text="Таблицы" FontSize="18" FontWeight="Bold" Margin="4,0,0,8"/>
            <ListBox x:Name="TablesList" Height="520" SelectionChanged="TablesList_SelectionChanged"/>
            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                <Button Content="Обновить список" Style="{StaticResource SecondaryButtonStyle}" Click="RefreshTables_Click"/>
                <Button Content="Обновить данные" Style="{StaticResource PrimaryButtonStyle}" Click="RefreshData_Click" Margin="8,0,0,0"/>
            </StackPanel>

            <TextBlock Text="Примечание:" FontSize="12" Foreground="#666" Margin="0,12,0,4"/>
            <TextBlock Text="Менеджер и админ могут просматривать таблицы. Пользователи скрыты." FontSize="12" TextWrapping="Wrap" Foreground="#888"/>
        </StackPanel>

        <Border Grid.Column="1" Background="White" CornerRadius="8" Padding="12" BorderBrush="#EEEEEE" BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Grid.Row="0" Margin="0,0,0,8">
                    <TextBlock Text="Текущая таблица:" FontSize="13" Foreground="#666" VerticalAlignment="Center"/>
                    <TextBlock x:Name="CurrentTableName" Text=" — " FontSize="14" FontWeight="SemiBold" Margin="8,0" VerticalAlignment="Center"/>
                </StackPanel>

                <DataGrid x:Name="TableDataGrid" Grid.Row="1" AutoGenerateColumns="True" IsReadOnly="True" 
                          CanUserAddRows="False" CanUserDeleteRows="False" SelectionMode="Extended"
                          RowHeight="30" />

                <StackPanel Orientation="Horizontal"
            Grid.Row="2"
            HorizontalAlignment="Right"
            Margin="0,12,0,0">

                    <Button x:Name="AddBtn"
            Content="Добавить"
            Style="{StaticResource PrimaryButtonStyle}"
            Click="AddBtn_Click"/>

                    <Button x:Name="OpenInEditorBtn"
            Content="Открыть запись"
            Style="{StaticResource SecondaryButtonStyle}"
            Click="OpenInEditor_Click"
            Margin="8,0,0,0"/>

                    <Button x:Name="DeleteBtn"
            Content="Удалить"
            Style="{StaticResource SecondaryButtonStyle}"
            Click="DeleteBtn_Click"
            Margin="8,0,0,0"/>

                    <Button x:Name="ExportCsvBtn"
            Content="Экспорт CSV"
            Style="{StaticResource SecondaryButtonStyle}"
            Click="ExportCsv_Click"
            Margin="8,0,0,0"/>

                    <Button x:Name="BackBtn"
            Content="Назад"
            Style="{StaticResource SecondaryButtonStyle}"
            Click="BackBtn_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
